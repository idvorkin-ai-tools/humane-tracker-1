{"ast":null,"code":"var _jsxFileName = \"/Users/idvorkin/gits/humane-tracker-1/humane-tracker/src/App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { HabitTracker } from './components/HabitTracker';\nimport { auth } from './config/firebase';\nimport { signInAnonymously, onAuthStateChanged } from 'firebase/auth';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [useMockMode, setUseMockMode] = useState(false);\n  useEffect(() => {\n    // Check if we're in test/dev mode without proper Firebase setup\n    const isTestMode = process.env.NODE_ENV === 'development' || window.location.hostname === 'localhost';\n\n    // Listen for auth state changes\n    const unsubscribe = onAuthStateChanged(auth, async currentUser => {\n      if (!currentUser) {\n        // Sign in anonymously if no user\n        try {\n          await signInAnonymously(auth);\n        } catch (error) {\n          console.error('Error signing in anonymously:', error);\n          // Log full error details\n          console.error('Full error details:', JSON.stringify(error, null, 2));\n\n          // If auth fails and we're in test mode, log the error\n          if (isTestMode) {\n            console.error('Firebase authentication failed. Please check your configuration.');\n            // Don't auto-fallback to mock mode - let user see the error\n          }\n        }\n      } else {\n        setUser(currentUser);\n      }\n      setLoading(false);\n    }, error => {\n      console.error('Auth state change error:', error);\n      // Don't auto-fallback to mock mode\n      if (isTestMode) {\n        console.error('Firebase configuration error:', error);\n      }\n      setLoading(false);\n    });\n    return () => unsubscribe();\n  }, []);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-spinner\",\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this);\n  }\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Setup Required\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"To use Firebase, please:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n        style: {\n          textAlign: 'left',\n          maxWidth: '500px',\n          margin: '20px auto'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: [\"Go to \", /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"https://console.firebase.google.com\",\n            target: \"_blank\",\n            rel: \"noopener noreferrer\",\n            style: {\n              color: '#60a5fa'\n            },\n            children: \"Firebase Console\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Select your \\\"humanetracker\\\" project\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [\"Enable \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Anonymous Authentication\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 22\n          }, this), \" in Authentication \\u2192 Sign-in method\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [\"Create \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Firestore Database\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 22\n          }, this), \" in test mode\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Refresh this page\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          marginTop: '30px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => window.location.reload(),\n          style: {\n            padding: '10px 20px',\n            background: '#60a5fa',\n            color: '#1a1a1a',\n            border: 'none',\n            borderRadius: '6px',\n            cursor: 'pointer',\n            fontSize: '14px',\n            fontWeight: '500'\n          },\n          children: \"Retry Connection\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [useMockMode && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: '#fbbf24',\n        color: '#1a1a1a',\n        padding: '8px',\n        textAlign: 'center',\n        fontSize: '12px'\n      },\n      children: \"Mock Mode - Firebase not configured\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(HabitTracker, {\n      userId: user.uid\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"SHo0eUchhnMe6042WQ6QRMUR5OQ=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","HabitTracker","auth","signInAnonymously","onAuthStateChanged","jsxDEV","_jsxDEV","App","_s","user","setUser","loading","setLoading","useMockMode","setUseMockMode","isTestMode","process","env","NODE_ENV","window","location","hostname","unsubscribe","currentUser","error","console","JSON","stringify","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","textAlign","maxWidth","margin","href","target","rel","color","marginTop","onClick","reload","padding","background","border","borderRadius","cursor","fontSize","fontWeight","userId","uid","_c","$RefreshReg$"],"sources":["/Users/idvorkin/gits/humane-tracker-1/humane-tracker/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { HabitTracker } from './components/HabitTracker';\nimport { auth } from './config/firebase';\nimport { signInAnonymously, onAuthStateChanged, User } from 'firebase/auth';\nimport './App.css';\n\nfunction App() {\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [useMockMode, setUseMockMode] = useState(false);\n\n  useEffect(() => {\n    // Check if we're in test/dev mode without proper Firebase setup\n    const isTestMode = process.env.NODE_ENV === 'development' || window.location.hostname === 'localhost';\n    \n    // Listen for auth state changes\n    const unsubscribe = onAuthStateChanged(auth, async (currentUser) => {\n      if (!currentUser) {\n        // Sign in anonymously if no user\n        try {\n          await signInAnonymously(auth);\n        } catch (error) {\n          console.error('Error signing in anonymously:', error);\n          // Log full error details\n          console.error('Full error details:', JSON.stringify(error, null, 2));\n          \n          // If auth fails and we're in test mode, log the error\n          if (isTestMode) {\n            console.error('Firebase authentication failed. Please check your configuration.');\n            // Don't auto-fallback to mock mode - let user see the error\n          }\n        }\n      } else {\n        setUser(currentUser);\n      }\n      setLoading(false);\n    }, (error) => {\n      console.error('Auth state change error:', error);\n      // Don't auto-fallback to mock mode\n      if (isTestMode) {\n        console.error('Firebase configuration error:', error);\n      }\n      setLoading(false);\n    });\n\n    return () => unsubscribe();\n  }, []);\n\n  if (loading) {\n    return (\n      <div className=\"loading-container\">\n        <div className=\"loading-spinner\">Loading...</div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return (\n      <div className=\"error-container\">\n        <h2>Setup Required</h2>\n        <p>To use Firebase, please:</p>\n        <ol style={{ textAlign: 'left', maxWidth: '500px', margin: '20px auto' }}>\n          <li>Go to <a href=\"https://console.firebase.google.com\" target=\"_blank\" rel=\"noopener noreferrer\" style={{ color: '#60a5fa' }}>Firebase Console</a></li>\n          <li>Select your \"humanetracker\" project</li>\n          <li>Enable <strong>Anonymous Authentication</strong> in Authentication â†’ Sign-in method</li>\n          <li>Create <strong>Firestore Database</strong> in test mode</li>\n          <li>Refresh this page</li>\n        </ol>\n        <p style={{ marginTop: '30px' }}>\n          <button \n            onClick={() => window.location.reload()} \n            style={{ \n              padding: '10px 20px', \n              background: '#60a5fa', \n              color: '#1a1a1a', \n              border: 'none', \n              borderRadius: '6px',\n              cursor: 'pointer',\n              fontSize: '14px',\n              fontWeight: '500'\n            }}\n          >\n            Retry Connection\n          </button>\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"App\">\n      {useMockMode && (\n        <div style={{ \n          background: '#fbbf24', \n          color: '#1a1a1a', \n          padding: '8px', \n          textAlign: 'center',\n          fontSize: '12px'\n        }}>\n          Mock Mode - Firebase not configured\n        </div>\n      )}\n      <HabitTracker userId={user.uid} />\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}