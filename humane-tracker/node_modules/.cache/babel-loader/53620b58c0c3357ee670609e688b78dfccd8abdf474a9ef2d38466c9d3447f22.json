{"ast":null,"code":"var _jsxFileName = \"/Users/idvorkin/gits/humane-tracker-1/humane-tracker/src/App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { HabitTracker } from './components/HabitTracker';\nimport { auth } from './config/firebase';\nimport { signInAnonymously, onAuthStateChanged } from 'firebase/auth';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [useMockMode, setUseMockMode] = useState(false);\n  useEffect(() => {\n    // Check if we're in test/dev mode without proper Firebase setup\n    const isTestMode = process.env.NODE_ENV === 'development' || window.location.hostname === 'localhost';\n\n    // Listen for auth state changes\n    const unsubscribe = onAuthStateChanged(auth, async currentUser => {\n      if (!currentUser) {\n        // Sign in anonymously if no user\n        try {\n          await signInAnonymously(auth);\n        } catch (error) {\n          console.error('Error signing in anonymously:', error);\n          // Log full error details\n          console.error('Full error details:', JSON.stringify(error, null, 2));\n\n          // If auth fails and we're in test mode, log the error\n          if (isTestMode) {\n            console.error('Firebase authentication failed. Please check your configuration.');\n            // Don't auto-fallback to mock mode - let user see the error\n          }\n        }\n      } else {\n        setUser(currentUser);\n      }\n      setLoading(false);\n    }, error => {\n      console.error('Auth state change error:', error);\n      // Don't auto-fallback to mock mode\n      if (isTestMode) {\n        console.error('Firebase configuration error:', error);\n      }\n      setLoading(false);\n    });\n    return () => unsubscribe();\n  }, []);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-spinner\",\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this);\n  }\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-container\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Unable to authenticate. Please refresh the page.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [useMockMode && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: '#fbbf24',\n        color: '#1a1a1a',\n        padding: '8px',\n        textAlign: 'center',\n        fontSize: '12px'\n      },\n      children: \"Mock Mode - Firebase not configured\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(HabitTracker, {\n      userId: user.uid\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"SHo0eUchhnMe6042WQ6QRMUR5OQ=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","HabitTracker","auth","signInAnonymously","onAuthStateChanged","jsxDEV","_jsxDEV","App","_s","user","setUser","loading","setLoading","useMockMode","setUseMockMode","isTestMode","process","env","NODE_ENV","window","location","hostname","unsubscribe","currentUser","error","console","JSON","stringify","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","background","color","padding","textAlign","fontSize","userId","uid","_c","$RefreshReg$"],"sources":["/Users/idvorkin/gits/humane-tracker-1/humane-tracker/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { HabitTracker } from './components/HabitTracker';\nimport { auth } from './config/firebase';\nimport { signInAnonymously, onAuthStateChanged, User } from 'firebase/auth';\nimport './App.css';\n\nfunction App() {\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [useMockMode, setUseMockMode] = useState(false);\n\n  useEffect(() => {\n    // Check if we're in test/dev mode without proper Firebase setup\n    const isTestMode = process.env.NODE_ENV === 'development' || window.location.hostname === 'localhost';\n    \n    // Listen for auth state changes\n    const unsubscribe = onAuthStateChanged(auth, async (currentUser) => {\n      if (!currentUser) {\n        // Sign in anonymously if no user\n        try {\n          await signInAnonymously(auth);\n        } catch (error) {\n          console.error('Error signing in anonymously:', error);\n          // Log full error details\n          console.error('Full error details:', JSON.stringify(error, null, 2));\n          \n          // If auth fails and we're in test mode, log the error\n          if (isTestMode) {\n            console.error('Firebase authentication failed. Please check your configuration.');\n            // Don't auto-fallback to mock mode - let user see the error\n          }\n        }\n      } else {\n        setUser(currentUser);\n      }\n      setLoading(false);\n    }, (error) => {\n      console.error('Auth state change error:', error);\n      // Don't auto-fallback to mock mode\n      if (isTestMode) {\n        console.error('Firebase configuration error:', error);\n      }\n      setLoading(false);\n    });\n\n    return () => unsubscribe();\n  }, []);\n\n  if (loading) {\n    return (\n      <div className=\"loading-container\">\n        <div className=\"loading-spinner\">Loading...</div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return (\n      <div className=\"error-container\">\n        <p>Unable to authenticate. Please refresh the page.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"App\">\n      {useMockMode && (\n        <div style={{ \n          background: '#fbbf24', \n          color: '#1a1a1a', \n          padding: '8px', \n          textAlign: 'center',\n          fontSize: '12px'\n        }}>\n          Mock Mode - Firebase not configured\n        </div>\n      )}\n      <HabitTracker userId={user.uid} />\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}