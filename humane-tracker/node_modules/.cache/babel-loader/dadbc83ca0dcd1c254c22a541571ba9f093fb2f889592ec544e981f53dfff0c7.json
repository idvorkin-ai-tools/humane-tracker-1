{"ast":null,"code":"import { collection, doc, setDoc, getDocs, query, where, orderBy, Timestamp, deleteDoc, onSnapshot, addDoc } from 'firebase/firestore';\nimport { db } from '../config/firebase';\nimport { startOfWeek, endOfWeek, isToday, differenceInDays } from 'date-fns';\nexport class HabitService {\n  constructor() {\n    this.habitsCollection = collection(db, 'habits');\n    this.entriesCollection = collection(db, 'entries');\n  }\n  // Create a new habit\n  async createHabit(habit) {\n    const newHabit = {\n      ...habit,\n      createdAt: Timestamp.now(),\n      updatedAt: Timestamp.now()\n    };\n    const docRef = await addDoc(this.habitsCollection, newHabit);\n    return docRef.id;\n  }\n\n  // Get all habits for a user\n  async getUserHabits(userId) {\n    const q = query(this.habitsCollection, where('userId', '==', userId));\n    const snapshot = await getDocs(q);\n    return snapshot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data()\n    }));\n  }\n\n  // Subscribe to habits changes\n  subscribeToHabits(userId, callback) {\n    const q = query(this.habitsCollection, where('userId', '==', userId));\n    return onSnapshot(q, snapshot => {\n      const habits = snapshot.docs.map(doc => {\n        var _doc$data$createdAt, _doc$data$updatedAt;\n        return {\n          id: doc.id,\n          ...doc.data(),\n          createdAt: (_doc$data$createdAt = doc.data().createdAt) === null || _doc$data$createdAt === void 0 ? void 0 : _doc$data$createdAt.toDate(),\n          updatedAt: (_doc$data$updatedAt = doc.data().updatedAt) === null || _doc$data$updatedAt === void 0 ? void 0 : _doc$data$updatedAt.toDate()\n        };\n      });\n      callback(habits);\n    });\n  }\n\n  // Add a habit entry\n  async addEntry(entry) {\n    const newEntry = {\n      ...entry,\n      date: Timestamp.fromDate(entry.date),\n      createdAt: Timestamp.now()\n    };\n    const docRef = await addDoc(this.entriesCollection, newEntry);\n    return docRef.id;\n  }\n\n  // Get entries for a habit within a date range\n  async getHabitEntries(habitId, startDate, endDate) {\n    const q = query(this.entriesCollection, where('habitId', '==', habitId), where('date', '>=', Timestamp.fromDate(startDate)), where('date', '<=', Timestamp.fromDate(endDate)), orderBy('date', 'desc'));\n    const snapshot = await getDocs(q);\n    return snapshot.docs.map(doc => {\n      var _doc$data$date, _doc$data$createdAt2;\n      return {\n        id: doc.id,\n        ...doc.data(),\n        date: (_doc$data$date = doc.data().date) === null || _doc$data$date === void 0 ? void 0 : _doc$data$date.toDate(),\n        createdAt: (_doc$data$createdAt2 = doc.data().createdAt) === null || _doc$data$createdAt2 === void 0 ? void 0 : _doc$data$createdAt2.toDate()\n      };\n    });\n  }\n\n  // Subscribe to entries changes for a week\n  subscribeToWeekEntries(userId, weekStart, weekEnd, callback) {\n    const q = query(this.entriesCollection, where('userId', '==', userId), where('date', '>=', Timestamp.fromDate(weekStart)), where('date', '<=', Timestamp.fromDate(weekEnd)));\n    return onSnapshot(q, snapshot => {\n      const entries = snapshot.docs.map(doc => {\n        var _doc$data$date2, _doc$data$createdAt3;\n        return {\n          id: doc.id,\n          ...doc.data(),\n          date: (_doc$data$date2 = doc.data().date) === null || _doc$data$date2 === void 0 ? void 0 : _doc$data$date2.toDate(),\n          createdAt: (_doc$data$createdAt3 = doc.data().createdAt) === null || _doc$data$createdAt3 === void 0 ? void 0 : _doc$data$createdAt3.toDate()\n        };\n      });\n      callback(entries);\n    });\n  }\n\n  // Calculate habit status\n  calculateHabitStatus(habit, entries, currentDate = new Date()) {\n    const weekStart = startOfWeek(currentDate, {\n      weekStartsOn: 1\n    }); // Week starts on Monday\n    const weekEnd = endOfWeek(currentDate, {\n      weekStartsOn: 1\n    });\n    const weekEntries = entries.filter(e => e.date >= weekStart && e.date <= weekEnd);\n    const totalValue = weekEntries.reduce((sum, e) => sum + e.value, 0);\n    const todayEntry = weekEntries.find(e => isToday(e.date));\n\n    // Check if done today\n    if (todayEntry && todayEntry.value >= 1) {\n      return 'done';\n    }\n\n    // Check if weekly target is met\n    if (totalValue >= habit.targetPerWeek) {\n      return 'met';\n    }\n\n    // Calculate days left and entries needed\n    const daysLeft = differenceInDays(weekEnd, currentDate) + 1;\n    const entriesNeeded = habit.targetPerWeek - totalValue;\n\n    // Check if due today\n    if (daysLeft <= entriesNeeded && !todayEntry) {\n      if (daysLeft === 0) return 'overdue';\n      if (daysLeft === 1) return 'today';\n      if (daysLeft === 2) return 'tomorrow';\n      return 'soon';\n    }\n    return 'pending';\n  }\n\n  // Get habits with status for current week\n  async getHabitsWithStatus(userId) {\n    const habits = await this.getUserHabits(userId);\n    const currentDate = new Date();\n    const weekStart = startOfWeek(currentDate, {\n      weekStartsOn: 1\n    });\n    const weekEnd = endOfWeek(currentDate, {\n      weekStartsOn: 1\n    });\n    const habitsWithStatus = [];\n    for (const habit of habits) {\n      const entries = await this.getHabitEntries(habit.id, weekStart, weekEnd);\n      const status = this.calculateHabitStatus(habit, entries, currentDate);\n      const currentWeekCount = entries.reduce((sum, e) => sum + e.value, 0);\n      habitsWithStatus.push({\n        ...habit,\n        status,\n        currentWeekCount,\n        entries\n      });\n    }\n    return habitsWithStatus;\n  }\n\n  // Update entry value\n  async updateEntry(entryId, value) {\n    const entryRef = doc(this.entriesCollection, entryId);\n    await setDoc(entryRef, {\n      value\n    }, {\n      merge: true\n    });\n  }\n\n  // Delete entry\n  async deleteEntry(entryId) {\n    await deleteDoc(doc(this.entriesCollection, entryId));\n  }\n}","map":{"version":3,"names":["collection","doc","setDoc","getDocs","query","where","orderBy","Timestamp","deleteDoc","onSnapshot","addDoc","db","startOfWeek","endOfWeek","isToday","differenceInDays","HabitService","constructor","habitsCollection","entriesCollection","createHabit","habit","newHabit","createdAt","now","updatedAt","docRef","id","getUserHabits","userId","q","snapshot","docs","map","data","subscribeToHabits","callback","habits","_doc$data$createdAt","_doc$data$updatedAt","toDate","addEntry","entry","newEntry","date","fromDate","getHabitEntries","habitId","startDate","endDate","_doc$data$date","_doc$data$createdAt2","subscribeToWeekEntries","weekStart","weekEnd","entries","_doc$data$date2","_doc$data$createdAt3","calculateHabitStatus","currentDate","Date","weekStartsOn","weekEntries","filter","e","totalValue","reduce","sum","value","todayEntry","find","targetPerWeek","daysLeft","entriesNeeded","getHabitsWithStatus","habitsWithStatus","status","currentWeekCount","push","updateEntry","entryId","entryRef","merge","deleteEntry"],"sources":["/Users/idvorkin/gits/humane-tracker-1/humane-tracker/src/services/habitService.ts"],"sourcesContent":["import { \n  collection, \n  doc, \n  setDoc, \n  getDocs, \n  query, \n  where, \n  orderBy, \n  Timestamp,\n  deleteDoc,\n  onSnapshot,\n  addDoc\n} from 'firebase/firestore';\nimport { db } from '../config/firebase';\nimport { Habit, HabitEntry, HabitWithStatus, HabitStatus } from '../types/habit';\nimport { startOfWeek, endOfWeek, isToday, differenceInDays } from 'date-fns';\n\nexport class HabitService {\n  private habitsCollection = collection(db, 'habits');\n  private entriesCollection = collection(db, 'entries');\n\n  // Create a new habit\n  async createHabit(habit: Omit<Habit, 'id' | 'createdAt' | 'updatedAt'>): Promise<string> {\n    const newHabit = {\n      ...habit,\n      createdAt: Timestamp.now(),\n      updatedAt: Timestamp.now()\n    };\n    const docRef = await addDoc(this.habitsCollection, newHabit);\n    return docRef.id;\n  }\n\n  // Get all habits for a user\n  async getUserHabits(userId: string): Promise<Habit[]> {\n    const q = query(this.habitsCollection, where('userId', '==', userId));\n    const snapshot = await getDocs(q);\n    return snapshot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data()\n    } as Habit));\n  }\n\n  // Subscribe to habits changes\n  subscribeToHabits(userId: string, callback: (habits: Habit[]) => void) {\n    const q = query(this.habitsCollection, where('userId', '==', userId));\n    return onSnapshot(q, (snapshot) => {\n      const habits = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data(),\n        createdAt: doc.data().createdAt?.toDate(),\n        updatedAt: doc.data().updatedAt?.toDate()\n      } as Habit));\n      callback(habits);\n    });\n  }\n\n  // Add a habit entry\n  async addEntry(entry: Omit<HabitEntry, 'id' | 'createdAt'>): Promise<string> {\n    const newEntry = {\n      ...entry,\n      date: Timestamp.fromDate(entry.date),\n      createdAt: Timestamp.now()\n    };\n    const docRef = await addDoc(this.entriesCollection, newEntry);\n    return docRef.id;\n  }\n\n  // Get entries for a habit within a date range\n  async getHabitEntries(habitId: string, startDate: Date, endDate: Date): Promise<HabitEntry[]> {\n    const q = query(\n      this.entriesCollection,\n      where('habitId', '==', habitId),\n      where('date', '>=', Timestamp.fromDate(startDate)),\n      where('date', '<=', Timestamp.fromDate(endDate)),\n      orderBy('date', 'desc')\n    );\n    const snapshot = await getDocs(q);\n    return snapshot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data(),\n      date: doc.data().date?.toDate(),\n      createdAt: doc.data().createdAt?.toDate()\n    } as HabitEntry));\n  }\n\n  // Subscribe to entries changes for a week\n  subscribeToWeekEntries(userId: string, weekStart: Date, weekEnd: Date, callback: (entries: HabitEntry[]) => void) {\n    const q = query(\n      this.entriesCollection,\n      where('userId', '==', userId),\n      where('date', '>=', Timestamp.fromDate(weekStart)),\n      where('date', '<=', Timestamp.fromDate(weekEnd))\n    );\n    return onSnapshot(q, (snapshot) => {\n      const entries = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data(),\n        date: doc.data().date?.toDate(),\n        createdAt: doc.data().createdAt?.toDate()\n      } as HabitEntry));\n      callback(entries);\n    });\n  }\n\n  // Calculate habit status\n  calculateHabitStatus(habit: Habit, entries: HabitEntry[], currentDate: Date = new Date()): HabitStatus {\n    const weekStart = startOfWeek(currentDate, { weekStartsOn: 1 }); // Week starts on Monday\n    const weekEnd = endOfWeek(currentDate, { weekStartsOn: 1 });\n    \n    const weekEntries = entries.filter(e => \n      e.date >= weekStart && e.date <= weekEnd\n    );\n    \n    const totalValue = weekEntries.reduce((sum, e) => sum + e.value, 0);\n    const todayEntry = weekEntries.find(e => isToday(e.date));\n    \n    // Check if done today\n    if (todayEntry && todayEntry.value >= 1) {\n      return 'done';\n    }\n    \n    // Check if weekly target is met\n    if (totalValue >= habit.targetPerWeek) {\n      return 'met';\n    }\n    \n    // Calculate days left and entries needed\n    const daysLeft = differenceInDays(weekEnd, currentDate) + 1;\n    const entriesNeeded = habit.targetPerWeek - totalValue;\n    \n    // Check if due today\n    if (daysLeft <= entriesNeeded && !todayEntry) {\n      if (daysLeft === 0) return 'overdue';\n      if (daysLeft === 1) return 'today';\n      if (daysLeft === 2) return 'tomorrow';\n      return 'soon';\n    }\n    \n    return 'pending';\n  }\n\n  // Get habits with status for current week\n  async getHabitsWithStatus(userId: string): Promise<HabitWithStatus[]> {\n    const habits = await this.getUserHabits(userId);\n    const currentDate = new Date();\n    const weekStart = startOfWeek(currentDate, { weekStartsOn: 1 });\n    const weekEnd = endOfWeek(currentDate, { weekStartsOn: 1 });\n    \n    const habitsWithStatus: HabitWithStatus[] = [];\n    \n    for (const habit of habits) {\n      const entries = await this.getHabitEntries(habit.id, weekStart, weekEnd);\n      const status = this.calculateHabitStatus(habit, entries, currentDate);\n      const currentWeekCount = entries.reduce((sum, e) => sum + e.value, 0);\n      \n      habitsWithStatus.push({\n        ...habit,\n        status,\n        currentWeekCount,\n        entries\n      });\n    }\n    \n    return habitsWithStatus;\n  }\n\n  // Update entry value\n  async updateEntry(entryId: string, value: number): Promise<void> {\n    const entryRef = doc(this.entriesCollection, entryId);\n    await setDoc(entryRef, { value }, { merge: true });\n  }\n\n  // Delete entry\n  async deleteEntry(entryId: string): Promise<void> {\n    await deleteDoc(doc(this.entriesCollection, entryId));\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}